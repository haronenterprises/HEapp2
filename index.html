<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haron Enterprises, LLC - Residential Lease Application</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            background-color: #f8f7f4; 
            font-family: 'Inter', sans-serif;
        }
        @import url('https://rsms.me/inter/inter.css');
        .form-section {
            display: none;
        }
        .form-section.active {
            display: block;
        }
        .step-item-active {
            border-color: #3b82f6;
            color: #3b82f6;
        }
        .step-item-complete {
            border-color: #16a34a;
            color: #16a34a;
            background-color: #f0fdf4;
        }
        .input-field {
            @apply w-full px-4 py-2 text-gray-700 bg-gray-50 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-200;
        }
        .label-text {
            @apply block text-sm font-medium text-gray-600 mb-1;
        }
        .radio-group {
            @apply flex items-center gap-x-4;
        }
        .radio-label {
            @apply flex items-center text-sm text-gray-700;
        }
        .radio-input {
            @apply h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500;
        }
        .form-grid {
            @apply grid grid-cols-1 md:grid-cols-2 gap-6;
        }
        .dynamic-item .remove-btn { 
            display: none; 
        }
        .dynamic-item:hover .remove-btn {
            display: block; 
        }
        @media print {
            body { background: #fff; }
            #navigation-controls, #progress-bar, #header, #footer { display: none !important; }
            .printable-only { display: block !important; }
            .print-button { display: none !important; }
            .no-print { display: none !important; }
        }
        .printable-only {
            display: none;
        }
        #submit-btn {
            background-color: #dc2626; /* red-600 */
        }
        #submit-btn:hover {
            background-color: #b91c1c; /* red-700 */
        }
        /* New styles for the printable summary */
        .printable-page {
            box-sizing: border-box;
            width: 8.5in;
            height: 11in;
            padding: 0.75in;
            margin: 0.5in auto;
            background: #fff;
            border: 1px solid #ccc;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .printable-field {
            border-bottom: 1px solid #000;
            padding-bottom: 2px;
            font-size: 0.9rem;
            margin-top: 1rem;
        }
        .printable-label {
            display: block;
            font-size: 0.75rem;
            color: #444;
            text-transform: uppercase;
        }
    </style>
</head>
<body class="antialiased text-gray-800">

    <div class="container mx-auto px-4 py-8 md:py-12 no-print">
        <header id="header" class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-gray-900">Haron Enterprises, LLC</h1>
            <p class="mt-2 text-lg text-gray-600">Residential Lease Application</p>
            <p class="text-sm text-gray-500">Eff date 09 24 25 v12.0    </p>
        </header>

        <div id="application-wizard" class="max-w-4xl mx-auto bg-white rounded-xl shadow-lg overflow-hidden">
            <div id="progress-bar" class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <!-- Progress steps will be dynamically added by JavaScript -->
                </div>
            </div>

            <form id="rental-application-form" class="p-6 md:p-8">
                <div id="status-message" class="text-sm px-4 py-2 rounded-md mb-4 hidden" role="alert"></div>
                
                <section id="section-1" class="form-section active">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Applicant Information</h2>
                    <p class="text-gray-600 mb-6">This first section is about you, the primary applicant. The information you provide helps us get to know you better. Please fill out all fields completely.</p>
                    <div class="form-grid">
                        <div><label class="label-text" for="fullName">Full Name</label><input type="text" id="fullName" name="Full Name" class="input-field" required></div>
                        <div><label class="label-text" for="dob">Date of Birth</label><input type="date" id="dob" name="Date of Birth" class="input-field" required></div>
                        <div><label class="label-text" for="phone">Phone</label><input type="tel" id="phone" name="Phone" class="input-field" required></div>
                        <div><label class="label-text" for="email">Email Address</label><input type="email" id="email" name="Email" class="input-field" required></div>
                        <div><label class="label-text" for="ssn">Social Security Number</label><input type="text" id="ssn" name="Social Security Number" class="input-field" required></div>
                        <div><label class="label-text" for="dl">Driver's License #</label><input type="text" id="dl" name="Driver's License #" class="input-field" required></div>
                        <div><label class="label-text" for="vehicleMake">Vehicle Make & Model</label><input type="text" id="vehicleMake" name="Vehicle Make & Model" class="input-field"></div>
                        <div><label class="label-text" for="vehicleTag">Vehicle Tag #</label><input type="text" id="vehicleTag" name="Vehicle Tag #" class="input-field"></div>
                        <div class="md:col-span-2"><label class="label-text" for="relativeName">Name of Nearest Relative</label><input type="text" id="relativeName" name="Name of Nearest Relative" class="input-field" required></div>
                        <div class="md:col-span-2"><label class="label-text" for="relativePhone">Phone of Nearest Relative</label><input type="tel" id="relativePhone" name="Phone of Nearest Relative" class="input-field" required></div>
                         <div class="md:col-span-2 space-y-4">
                            <div>
                                <span class="label-text">Are you a member of the Armed Services?</span>
                                <div class="radio-group mt-2">
                                    <label class="radio-label"><input type="radio" name="Armed Services Member" value="yes" class="radio-input mr-2">Yes</label>
                                    <label class="radio-label"><input type="radio" name="Armed Services Member" value="no" class="radio-input mr-2" checked>No</label>
                                </div>
                            </div>
                         </div>
                    </div>
                </section>

                <section id="section-2" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Household Information</h2>
                    <p class="text-gray-600 mb-6">In this section, please provide your current address and details about everyone who will be living in the residence. This helps us understand the composition of your household.</p>
                     <div class="form-grid">
                        <div class="md:col-span-2"><label class="label-text" for="streetAddress">Street Address</label><input type="text" id="streetAddress" name="Street Address" class="input-field" required></div>
                        <div><label class="label-text" for="city">City</label><input type="text" id="city" name="City" class="input-field" required></div>
                        <div><label class="label-text" for="state">State</label><input type="text" id="state" name="State" class="input-field" required></div>
                        <div class="md:col-span-2"><label class="label-text" for="zip">Zip Code</label><input type="text" id="zip" name="Zip Code" class="input-field" required></div>
                    </div>
                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700">Other Household Members</h3>
                        <div id="household-members-container" class="mt-4 space-y-4"></div>
                        <button type="button" id="add-member-btn" class="mt-4 text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200">+ Add Household Member</button>
                    </div>
                    <div class="mt-8 space-y-6">
                        <div>
                            <span class="label-text">Are ALL members of the household U.S. Citizens?</span>
                             <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="US Citizens" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'citizen-explain', false)">Yes</label>
                                <label class="radio-label"><input type="radio" name="US Citizens" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'citizen-explain', false)">No</label>
                            </div>
                             <div id="citizen-explain" class="hidden mt-2"><label class="label-text">If no, please explain:</label><textarea class="input-field" name="US Citizens Explanation" rows="2"></textarea></div>
                        </div>
                         <div>
                            <span class="label-text">Is any household member (age 18+) a full-time student?</span>
                             <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Full-Time Student" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'student-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Full-Time Student" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'student-explain', true)" checked>No</label>
                            </div>
                             <div id="student-explain" class="hidden mt-2"><label class="label-text">If yes, please list and attach school enrollment printout:</label><textarea class="input-field" name="Student Explanation" rows="2"></textarea></div>
                        </div>
                    </div>
                </section>

                <section id="section-3" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Background & History</h2>
                    <p class="text-gray-600 mb-6">This section covers your rental and financial history. Please answer all questions honestly, as this information is used for standard background verification. Answering "yes" does not necessarily disqualify you.</p>
                    <div class="space-y-6">
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <span class="label-text">Have you ever been evicted?</span>
                            <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Ever Evicted" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'evicted-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Ever Evicted" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'evicted-explain', true)" checked>No</label>
                            </div>
                            <div id="evicted-explain" class="hidden mt-2"><label class="label-text">Please explain:</label><textarea class="input-field" name="Evicted Explanation" rows="2"></textarea></div>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <span class="label-text">Have you ever been foreclosed on?</span>
                            <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Ever Foreclosed" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'foreclosed-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Ever Foreclosed" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'foreclosed-explain', true)" checked>No</label>
                            </div>
                            <div id="foreclosed-explain" class="hidden mt-2"><label class="label-text">Please explain:</label><textarea class="input-field" name="Foreclosed Explanation" rows="2"></textarea></div>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <span class="label-text">Have you ever filed for bankruptcy?</span>
                            <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Ever Filed for Bankruptcy" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'bankruptcy-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Ever Filed for Bankruptcy" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'bankruptcy-explain', true)" checked>No</label>
                            </div>
                             <div id="bankruptcy-explain" class="hidden mt-2"><label class="label-text">If yes, explain:</label><textarea class="input-field" name="Bankruptcy Explanation" rows="2"></textarea></div>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <span class="label-text">Have you ever been charged with a felony?</span>
                            <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Ever Charged with a Felony" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'felony-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Ever Charged with a Felony" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'felony-explain', true)" checked>No</label>
                            </div>
                             <div id="felony-explain" class="hidden mt-2"><label class="label-text">If yes, explain:</label><textarea class="input-field" name="Felony Explanation" rows="2"></textarea></div>
                        </div>
                        <div class="p-4 border border-gray-200 rounded-lg">
                            <span class="label-text">Have you ever broken a lease or refused to pay rent?</span>
                            <div class="radio-group mt-2">
                                <label class="radio-label"><input type="radio" name="Ever Broken Lease" value="yes" class="radio-input mr-2" onclick="toggleExplain(this, 'brokenLease-explain', true)">Yes</label>
                                <label class="radio-label"><input type="radio" name="Ever Broken Lease" value="no" class="radio-input mr-2" onclick="toggleExplain(this, 'brokenLease-explain', true)" checked>No</label>
                            </div>
                             <div id="brokenLease-explain" class="hidden mt-2"><label class="label-text">If yes, explain:</label><textarea class="input-field" name="Broken Lease Explanation" rows="2"></textarea></div>
                        </div>
                    </div>
                </section>

                <section id="section-4" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Financial & Employment Information</h2>
                     <p class="text-gray-600 mb-6">This section helps us verify your household's financial stability and ability to meet rent obligations. Please provide details on employment, income, assets, and liabilities for all adult household members.</p>

                    <div class="mt-6">
                        <h3 class="text-lg font-semibold text-gray-700">Employment History (4 years minimum)</h3>
                        <div id="employment-container" class="mt-4 space-y-6"></div>
                        <button type="button" id="add-employment-btn" class="mt-4 text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200">+ Add Employment</button>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700">Other Income Sources</h3>
                        <div id="income-container" class="mt-4 space-y-4"></div>
                        <button type="button" id="add-income-btn" class="mt-4 text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200">+ Add Income Source</button>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700">Assets</h3>
                        <div id="assets-container" class="mt-4 space-y-4"></div>
                        <button type="button" id="add-asset-btn" class="mt-4 text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200">+ Add Asset</button>
                    </div>

                    <div class="mt-8">
                        <h3 class="text-lg font-semibold text-gray-700">Liabilities</h3>
                        <div id="liabilities-container" class="mt-4 space-y-4"></div>
                        <button type="button" id="add-liability-btn" class="mt-4 text-sm font-semibold text-blue-600 hover:text-blue-800 transition-colors duration-200">+ Add Liability</button>
                    </div>
                </section>

                <section id="section-5" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Required Documents</h2>
                    <p class="text-gray-600 mb-6">To complete the verification process, we need you to upload several documents. You can upload multiple files for each category if needed. This is a crucial step for a complete application.</p>
                    <div class="space-y-4">
                        <div class="document-upload-item"><label class="label-text">Photo ID for all adult household members</label><input type="file" name="file_PhotoID[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Social Security Cards for all household members</label><input type="file" name="file_SocialSecurityCards[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Birth certificates for household members under 18</label><input type="file" name="file_BirthCertificates[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Six (6) most current pay stubs</label><input type="file" name="file_PayStubs[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Proof of last six (6) months rent/mortgage payments</label><input type="file" name="file_RentMortgageProof[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Self-Employed: Last year's tax return & 3 months income reports</label><input type="file" name="file_SelfEmployedDocs[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Notarized statement for adult household members with no income</label><input type="file" name="file_NoIncomeStatement[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Letter from employer(s)</label><input type="file" name="file_EmployerLetter[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Last six (6) months of bank statements</label><input type="file" name="file_BankStatements[]" class="input-field" multiple></div>
                        <div class="document-upload-item"><label class="label-text">Photos of any animals that will be living on the premises</label><input type="file" name="file_AnimalPhotos[]" class="input-field" multiple></div>
                    </div>
                </section>

                <section id="section-6" class="form-section">
                    <h2 class="text-2xl font-semibold mb-2 text-gray-800">Authorizations & Agreement</h2>
                    <p class="text-gray-600 mb-6">You're almost done! Please read the following legal statements carefully. Your agreement is required to finalize and submit your application for review.</p>
                    <div class="prose prose-sm max-w-none text-gray-600 bg-gray-50 p-4 rounded-md border border-gray-200">
                        <p><strong>Text:</strong> I/We understand that Florida Statute 817 provides that a person is guilty of a misdemeanor in the first degree who knowingly makes a false statement in writing with the intent to mislead a landlord in repairing or leasing a dwelling unit. I CERTIFY THAT ALL THE INFORMATION PROVIDED IN THIS APPLICATION IS TRUE AND CORRECT. I, the undersigned applicant, affirm the information above is true and complete and authorize Haron Enterprises, LLC to make any and all inquiries necessary to verify said information, including but not limited to, direct contact with any person, business, or agency named above. I also understand that any false information on this application may cause this application to be rejected and may be grounds for immediate termination of the lease at the owner's option. I also agree to all the terms and conditions in the rental agreement, should this application be accepted.</p>
                    </div>
                    <div class="mt-6">
                        <label class="flex items-center">
                            <input type="checkbox" id="agree-terms" name="agreement" class="h-5 w-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500" required>
                            <span class="ml-3 text-gray-700">By checking this box, you attest that all information provided is true and accurate, and you agree to the terms and authorizations.</span>
                        </label>
                    </div>
                     <div class="mt-8 p-4 bg-blue-50 border-l-4 border-blue-500 rounded-r-lg">
                        <h3 class="font-semibold text-blue-800">Final Step: Application Fee</h3>
                        <p class="text-sm text-blue-700 mt-1">A non-refundable processing fee of $50.00 is required. This fee must be paid prior to an application being accepted or processed. Upon submitting, you will be contacted with payment instructions.</p>
                    </div>
                </section>
                
                <!-- START: NEW PAGE 7 - REPLICA SUMMARY -->
                <section id="section-7" class="form-section printable-only">
                    <div id="printable-application">
                        <!-- Content will be generated by JS to replicate the PDF -->
                    </div>
                    <div class="mt-10 flex justify-center no-print">
                        <button type="button" id="final-submit-btn" class="px-8 py-3 text-sm font-semibold text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors duration-200">Submit Application</button>
                    </div>
                </section>
                <!-- END: NEW PAGE 7 - REPLICA SUMMARY -->

            </form>
            
            <div id="navigation-controls" class="p-6 bg-gray-50 border-t border-gray-200 flex justify-between items-center">
                <button type="button" id="prev-btn" class="px-6 py-2 text-sm font-semibold text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-100 transition-colors duration-200" style="display: none;">Previous</button>
                <div id="spacer" style="display: block;"></div>
                <button type="button" id="next-btn" class="px-6 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 transition-colors duration-200">Next</button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            let currentStep = 1;
            const totalSteps = 7;
            const form = document.getElementById('rental-application-form');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const finalSubmitBtn = document.getElementById('final-submit-btn');
            const spacer = document.getElementById('spacer');

            const updateButtons = () => {
                prevBtn.style.display = currentStep > 1 ? 'block' : 'none';
                spacer.style.display = currentStep === 1 ? 'block' : 'none';
                nextBtn.style.display = currentStep < totalSteps ? 'block' : 'none';
                finalSubmitBtn.style.display = currentStep === totalSteps ? 'block' : 'none';
            };

            const updateProgressBar = () => {
                const stepItems = document.getElementById('progress-bar').querySelector('.flex');
                stepItems.innerHTML = '';
                const newSteps = ['Personal', 'Household', 'History', 'Financial', 'Documents', 'Agreement', 'Final'];
                
                newSteps.forEach((label, index) => {
                    const stepNumber = index + 1;
                    const stepDiv = document.createElement('div');
                    stepDiv.id = `step-${stepNumber}`;
                    stepDiv.className = 'step-item text-center flex-1';

                    const innerDiv = document.createElement('div');
                    innerDiv.className = 'border-b-4 pb-2 text-xs md:text-sm font-semibold';
                    innerDiv.textContent = label;
                    stepDiv.appendChild(innerDiv);

                    if (stepNumber < currentStep) {
                        stepDiv.classList.add('step-item-complete');
                        innerDiv.classList.add('border-green-500', 'text-green-600');
                    } else if (stepNumber === currentStep) {
                        stepDiv.classList.add('step-item-active');
                        innerDiv.classList.add('border-blue-500', 'text-blue-600');
                    } else {
                        innerDiv.classList.add('border-gray-200', 'text-gray-400');
                    }
                    stepItems.appendChild(stepDiv);
                });
            };

            const showSection = (step) => {
                document.querySelectorAll('.form-section').forEach(section => section.classList.remove('active'));
                document.getElementById(`section-${step}`).classList.add('active');
            };

            const generatePrintableDocument = () => {
                const formData = new FormData(form);
                const printableContainer = document.getElementById('printable-application');
                let printableHTML = '';
                const data = {};

                for (const [key, value] of formData.entries()) {
                    if (key.startsWith('file_')) continue;
                    data[key] = value;
                }

                // Page 1
                printableHTML += `<div class="printable-page">
                    <h1 class="text-xl font-bold text-center">HARON ENTERPRISES, LLC</h1>
                    <p class="text-center text-sm">RESIDENTIAL LEASE APPLICATION</p>
                    <p class="text-right text-xs mt-4">Eff Date 09 18 25 v10.7</p>

                    <h2 class="text-md font-bold mt-8 mb-4">I. PERSONAL</h2>
                    <div class="grid grid-cols-2 gap-x-8 gap-y-4">
                        <div class="printable-field"><p class="printable-label">Full Name</p>${data['Full Name'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Date of Birth</p>${data['Date of Birth'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Phone</p>${data['Phone'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Email Address</p>${data['Email'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Social Security Number</p>${data['Social Security Number'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Driver's License #</p>${data["Driver's License #"] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Vehicle Make & Model</p>${data['Vehicle Make & Model'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Vehicle Tag #</p>${data['Vehicle Tag #'] || ''}</div>
                    </div>
                    <div class="printable-field mt-4"><p class="printable-label">Name of Nearest Relative</p>${data['Name of Nearest Relative'] || ''}</div>
                    <div class="printable-field mt-4"><p class="printable-label">Phone of Nearest Relative</p>${data['Phone of Nearest Relative'] || ''}</div>
                    <div class="printable-field mt-4"><p class="printable-label">Are you a member of the Armed Services?</p>${data['Armed Services Member'] || 'No'}</div>
                </div>`;

                // Page 2
                printableHTML += `<div class="printable-page">
                    <h1 class="text-xl font-bold text-center">HARON ENTERPRISES, LLC</h1>
                    <p class="text-center text-sm">RESIDENTIAL LEASE APPLICATION</p>
                    <p class="text-right text-xs mt-4">Eff Date 09 18 25 v10.7</p>
                    
                    <h2 class="text-md font-bold mt-8 mb-4">II. HOUSEHOLD INFORMATION</h2>
                    <div class="grid grid-cols-2 gap-x-8 gap-y-4">
                        <div class="printable-field col-span-2"><p class="printable-label">Street Address</p>${data['Street Address'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">City</p>${data['City'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">State</p>${data['State'] || ''}</div>
                        <div class="printable-field"><p class="printable-label">Zip Code</p>${data['Zip Code'] || ''}</div>
                    </div>
                    
                    <h3 class="text-sm font-bold mt-8">OTHER HOUSEHOLD MEMBERS</h3>
                    <div class="space-y-4">`;
                
                for (let i = 1; data[`Household Member ${i} Full Name`]; i++) {
                    printableHTML += `
                        <div class="grid grid-cols-3 gap-4">
                            <div class="printable-field"><p class="printable-label">Full Name</p>${data[`Household Member ${i} Full Name`]}</div>
                            <div class="printable-field"><p class="printable-label">Age & DOB</p>${data[`Household Member ${i} Age & DOB`]}</div>
                            <div class="printable-field"><p class="printable-label">Relationship</p>${data[`Household Member ${i} Relationship`]}</div>
                        </div>`;
                }

                printableHTML += `</div>
                    <div class="printable-field mt-8"><p class="printable-label">Are ALL members of the household U.S. Citizens?</p>${data['US Citizens'] || 'No'}</div>`;
                if (data['US Citizens Explanation']) printableHTML += `<div class="printable-field mt-2"><p class="printable-label">If no, please explain:</p>${data['US Citizens Explanation']}</div>`;
                printableHTML += `<div class="printable-field mt-4"><p class="printable-label">Is any household member (age 18+) a full-time student?</p>${data['Full-Time Student'] || 'No'}</div>`;
                if (data['Student Explanation']) printableHTML += `<div class="printable-field mt-2"><p class="printable-label">If yes, please list and attach school enrollment printout:</p>${data['Student Explanation']}</div>`;

                printableHTML += `</div>`; // Close Page 2

                // Page 3 - Background & History
                printableHTML += `<div class="printable-page">
                    <h1 class="text-xl font-bold text-center">HARON ENTERPRISES, LLC</h1>
                    <p class="text-center text-sm">RESIDENTIAL LEASE APPLICATION</p>
                    <p class="text-right text-xs mt-4">Eff Date 09 18 25 v10.7</p>

                    <h2 class="text-md font-bold mt-8 mb-4">III. BACKGROUND & HISTORY</h2>
                    <div class="space-y-6">
                        <div class="printable-field"><p class="printable-label">Have you ever been evicted?</p>${data['Ever Evicted'] || 'No'}</div>
                        ${data['Evicted Explanation'] ? `<div class="printable-field mt-2"><p class="printable-label">Explanation</p>${data['Evicted Explanation']}</div>` : ''}

                        <div class="printable-field mt-4"><p class="printable-label">Have you ever been foreclosed on?</p>${data['Ever Foreclosed'] || 'No'}</div>
                        ${data['Foreclosed Explanation'] ? `<div class="printable-field mt-2"><p class="printable-label">Explanation</p>${data['Foreclosed Explanation']}</div>` : ''}

                        <div class="printable-field mt-4"><p class="printable-label">Have you ever filed for bankruptcy?</p>${data['Ever Filed for Bankruptcy'] || 'No'}</div>
                        ${data['Bankruptcy Explanation'] ? `<div class="printable-field mt-2"><p class="printable-label">Explanation</p>${data['Bankruptcy Explanation']}</div>` : ''}
                        
                        <div class="printable-field mt-4"><p class="printable-label">Have you ever been charged with a felony?</p>${data['Ever Charged with a Felony'] || 'No'}</div>
                        ${data['Felony Explanation'] ? `<div class="printable-field mt-2"><p class="printable-label">Explanation</p>${data['Felony Explanation']}</div>` : ''}
                        
                        <div class="printable-field mt-4"><p class="printable-label">Have you ever broken a lease or refused to pay rent?</p>${data['Ever Broken Lease'] || 'No'}</div>
                        ${data['Broken Lease Explanation'] ? `<div class="printable-field mt-2"><p class="printable-label">Explanation</p>${data['Broken Lease Explanation']}</div>` : ''}
                    </div>
                </div>`;

                // Page 4-5 Financial & Employment
                printableHTML += `<div class="printable-page">
                    <h1 class="text-xl font-bold text-center">HARON ENTERPRISES, LLC</h1>
                    <p class="text-center text-sm">RESIDENTIAL LEASE APPLICATION</p>
                    <p class="text-right text-xs mt-4">Eff Date 09 18 25 v10.7</p>

                    <h2 class="text-md font-bold mt-8 mb-4">IV. FINANCIAL & EMPLOYMENT</h2>
                    <h3 class="text-sm font-bold mt-4">EMPLOYMENT HISTORY (4 years minimum)</h3>
                    <div class="space-y-4">`;

                for (let i = 1; data[`Employment ${i} Employer Name`]; i++) {
                    printableHTML += `
                        <div class="grid grid-cols-2 gap-x-8 gap-y-4">
                            <h4 class="col-span-2 font-bold mt-4">Employment ${i}</h4>
                            <div class="printable-field"><p class="printable-label">Employer Name</p>${data[`Employment ${i} Employer Name`]}</div>
                            <div class="printable-field"><p class="printable-label">Phone Number</p>${data[`Employment ${i} Phone Number`]}</div>
                            <div class="printable-field col-span-2"><p class="printable-label">Address</p>${data[`Employment ${i} Address`]}</div>
                            <div class="printable-field"><p class="printable-label">Position</p>${data[`Employment ${i} Position`]}</div>
                            <div class="printable-field"><p class="printable-label">Pay Rate</p>${data[`Employment ${i} Pay Rate`]}</div>
                            <div class="printable-field"><p class="printable-label">Annual Income</p>${data[`Employment ${i} Annual Income`]}</div>
                            <div class="printable-field"><p class="printable-label">Time Employed</p>${data[`Employment ${i} Time Employed`]}</div>
                        </div>`;
                }
                
                printableHTML += `</div>
                    <h3 class="text-sm font-bold mt-8">OTHER INCOME SOURCES</h3>
                    <div class="space-y-4">`;
                for (let i = 1; data[`Income ${i} Type`]; i++) {
                    printableHTML += `
                        <div class="grid grid-cols-2 gap-4">
                            <div class="printable-field"><p class="printable-label">Type of Income</p>${data[`Income ${i} Type`]}</div>
                            <div class="printable-field"><p class="printable-label">Gross Annual Amount</p>${data[`Income ${i} Amount`]}</div>
                        </div>`;
                }

                printableHTML += `</div>
                    <h3 class="text-sm font-bold mt-8">ASSETS</h3>
                    <div class="space-y-4">`;
                for (let i = 1; data[`Asset ${i} Type`]; i++) {
                    printableHTML += `
                        <div class="grid grid-cols-3 gap-4">
                            <div class="printable-field"><p class="printable-label">Type of Asset</p>${data[`Asset ${i} Type`]}</div>
                            <div class="printable-field"><p class="printable-label">Asset Value</p>${data[`Asset ${i} Value`]}</div>
                            <div class="printable-field"><p class="printable-label">Interest Rate</p>${data[`Asset ${i} Interest Rate`]}</div>
                        </div>`;
                }

                printableHTML += `</div>
                    <h3 class="text-sm font-bold mt-8">LIABILITIES</h3>
                    <div class="space-y-4">`;
                for (let i = 1; data[`Liability ${i} Type`]; i++) {
                    printableHTML += `
                        <div class="grid grid-cols-4 gap-4">
                            <div class="printable-field"><p class="printable-label">Type of Credit/Loan</p>${data[`Liability ${i} Type`]}</div>
                            <div class="printable-field"><p class="printable-label">Creditor's Name</p>${data[`Liability ${i} Creditor's Name`]}</div>
                            <div class="printable-field"><p class="printable-label">Balance Owed</p>${data[`Liability ${i} Balance Owed`]}</div>
                            <div class="printable-field"><p class="printable-label">Monthly Payment</p>${data[`Liability ${i} Monthly Payment`]}</div>
                        </div>`;
                }
                printableHTML += `</div>
                </div>`;

                // Page 6 - Authorizations
                printableHTML += `<div class="printable-page">
                    <h1 class="text-xl font-bold text-center">HARON ENTERPRISES, LLC</h1>
                    <p class="text-center text-sm">RESIDENTIAL LEASE APPLICATION</p>
                    <p class="text-right text-xs mt-4">Eff Date 09 18 25 v10.7</p>

                    <h2 class="text-md font-bold mt-8 mb-4">V. AUTHORIZATIONS & AGREEMENT</h2>
                    <div class="text-sm border border-black p-4">
                        <p class="text-justify"><strong>Text:</strong> I/We understand that Florida Statute 817 provides that a person is guilty of a misdemeanor in the first degree who knowingly makes a false statement in writing with the intent to mislead a landlord in repairing or leasing a dwelling unit. I CERTIFY THAT ALL THE INFORMATION PROVIDED IN THIS APPLICATION IS TRUE AND CORRECT. I, the undersigned applicant, affirm the information above is true and complete and authorize Haron Enterprises, LLC to make any and all inquiries necessary to verify said information, including but not limited to, direct contact with any person, business, or agency named above. I also understand that any false information on this application may cause this application to be rejected and may be grounds for immediate termination of the lease at the owner's option. I also agree to all the terms and conditions in the rental agreement, should this application be accepted.</p>
                    </div>
                    <div class="printable-field mt-8"><p class="printable-label">Agreement Checkbox</p>${data['agreement'] ? 'Checked' : 'Not Checked'}</div>
                </div>`;

                printableContainer.innerHTML = printableHTML;
            };

            nextBtn.addEventListener('click', (e) => {
                e.preventDefault();
                const currentSection = document.getElementById(`section-${currentStep}`);
                const requiredInputs = currentSection.querySelectorAll('[required]');
                let isValid = true;
                
                requiredInputs.forEach(input => {
                    if (!input.checkValidity()) {
                        isValid = false;
                        input.reportValidity();
                    }
                });
                
                if (isValid) {
                    if (currentStep < 6) {
                        currentStep++;
                        showSection(currentStep);
                        updateButtons();
                        updateProgressBar();
                        window.scrollTo(0, 0);
                    } else if (currentStep === 6 && document.getElementById('agree-terms').checked) {
                        currentStep = 7;
                        generatePrintableDocument();
                        showSection(currentStep);
                        updateButtons();
                        updateProgressBar();
                        window.scrollTo(0, 0);
                    }
                }
            });

            finalSubmitBtn.addEventListener('click', () => {
                generatePrintableDocument(); // Ensure summary is generated right before saving
                const element = document.getElementById('printable-application');
                const opt = {
                    margin: 0.5,
                    filename: 'Haron_Enterprises_Lease_Application.pdf',
                    image: { type: 'jpeg', quality: 0.98 },
                    html2canvas: { scale: 2 },
                    jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
                };
                html2pdf().from(element).set(opt).save();
                document.getElementById('navigation-controls').style.display = 'none';
                document.getElementById('progress-bar').style.display = 'none';
                document.getElementById('header').style.display = 'none';
            });

            prevBtn.addEventListener('click', (e) => {
                e.preventDefault();
                if (currentStep > 1) {
                    currentStep--;
                    showSection(currentStep);
                    updateButtons();
                    updateProgressBar();
                    window.scrollTo(0, 0);
                }
            });

            const createDynamicBlock = (containerId, titlePrefix, innerHTMLCallback) => {
                const container = document.getElementById(containerId);
                const count = container.querySelectorAll('.dynamic-item').length + 1;
                const newBlock = document.createElement('div');
                newBlock.className = 'p-4 border border-gray-200 rounded-lg relative dynamic-item';
                newBlock.innerHTML = `
                    <button type="button" class="absolute top-2 right-2 text-red-500 hover:text-red-700 remove-btn" onclick="this.parentElement.remove()">&#x2715;</button>
                    <h4 class="font-semibold mb-2 text-sm">${titlePrefix} ${count}</h4>
                    ${innerHTMLCallback(count)}
                `;
                container.appendChild(newBlock);
            };

            document.getElementById('add-member-btn').addEventListener('click', () => {
                createDynamicBlock('household-members-container', 'Member', (count) => `
                    <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div><label class="label-text text-xs">Full Name</label><input type="text" name="Household Member ${count} Full Name" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Age & DOB</label><input type="text" name="Household Member ${count} Age & DOB" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Relationship to Applicant</label><input type="text" name="Household Member ${count} Relationship" class="input-field text-sm"></div>
                    </div>`);
            });

            const createEmploymentBlock = () => {
                 createDynamicBlock('employment-container', 'Employment Record', (count) => `
                     <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div><label class="label-text text-xs">Employer Name</label><input type="text" name="Employment ${count} Employer Name" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Phone Number</label><input type="text" name="Employment ${count} Phone Number" class="input-field text-sm"></div>
                        <div class="md:col-span-2"><label class="label-text text-xs">Address</label><input type="text" name="Employment ${count} Address" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Position</label><input type="text" name="Employment ${count} Position" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Pay Rate ($/hr, salary)</label><input type="text" name="Employment ${count} Pay Rate" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Annual Income (gross)</label><input type="text" name="Employment ${count} Annual Income" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Time Employed (e.g., 2 years)</label><input type="text" name="Employment ${count} Time Employed" class="input-field text-sm"></div>
                    </div>`);
            };
            document.getElementById('add-employment-btn').addEventListener('click', createEmploymentBlock);

            document.getElementById('add-income-btn').addEventListener('click', () => {
                createDynamicBlock('income-container', 'Income Source', (count) => `
                     <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                        <div><label class="label-text text-xs">Type of Income (e.g., Alimony)</label><input type="text" name="Income ${count} Type" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Gross Annual Amount</label><input type="text" name="Income ${count} Amount" class="input-field text-sm"></div>
                     </div>`);
            });

            document.getElementById('add-asset-btn').addEventListener('click', () => {
                createDynamicBlock('assets-container', 'Asset', (count) => `
                     <div class="grid grid-cols-1 sm:grid-cols-3 gap-4">
                        <div><label class="label-text text-xs">Type of Asset</label><input type="text" name="Asset ${count} Type" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Asset Value</label><input type="text" name="Asset ${count} Value" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Interest Rate</label><input type="text" name="Asset ${count} Interest Rate" class="input-field text-sm"></div>
                     </div>`);
            });

            document.getElementById('add-liability-btn').addEventListener('click', () => {
                createDynamicBlock('liabilities-container', 'Liability', (count) => `
                     <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                        <div><label class="label-text text-xs">Type of Credit/Loan</label><input type="text" name="Liability ${count} Type" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Creditor's Name</label><input type="text" name="Liability ${count} Creditor's Name" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Balance Owed</label><input type="text" name="Liability ${count} Balance Owed" class="input-field text-sm"></div>
                        <div><label class="label-text text-xs">Monthly Payment</label><input type="text" name="Liability ${count} Monthly Payment" class="input-field text-sm"></div>
                     </div>`);
            });
            createEmploymentBlock();

            showSection(1);
            updateButtons();
            updateProgressBar();
        });

        function toggleExplain(radio, divId, showOnYes) {
            const explainDiv = document.getElementById(divId);
            const shouldShow = (radio.value === 'yes' && showOnYes) || (radio.value === 'no' && !showOnYes);
            if (shouldShow) {
                explainDiv.classList.remove('hidden');
            } else {
                explainDiv.classList.add('hidden');
            }
        }
    </script>
</body>
</html>
            // START: ADDED CODE FOR FORM SUBMISSION AND SUMMARY
            const generateSummary = () => {
                const formData = new FormData(form);
                let summaryOutput = '';

                for (const [key, value] of formData.entries()) {
                    if (key && value && !key.startsWith('file_')) {
                        summaryOutput += `<p><strong>${key}:</strong> ${value}</p>`;
                    }
                }

                // Special handling for dynamic sections to improve readability
                summaryOutput = summaryOutput.replace(/Household Member (\d+) Full Name/g, '<h4 class="font-semibold mt-4">Household Member $1</h4><p><strong>Full Name:</strong>');
                summaryOutput = summaryOutput.replace(/Household Member (\d+) Age & DOB/g, '<strong>Age & DOB:</strong>');
                summaryOutput = summaryOutput.replace(/Household Member (\d+) Relationship/g, '<strong>Relationship to Applicant:</strong>');
                
                summaryOutput = summaryOutput.replace(/Employment (\d+) Employer Name/g, '<h4 class="font-semibold mt-4">Employment $1</h4><p><strong>Employer Name:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Phone Number/g, '<strong>Phone Number:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Address/g, '<strong>Address:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Position/g, '<strong>Position:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Pay Rate/g, '<strong>Pay Rate:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Annual Income/g, '<strong>Annual Income:</strong>');
                summaryOutput = summaryOutput.replace(/Employment (\d+) Time Employed/g, '<strong>Time Employed:</strong>');

                summaryOutput = summaryOutput.replace(/Income (\d+) Type/g, '<h4 class="font-semibold mt-4">Other Income $1</h4><p><strong>Type of Income:</strong>');
                summaryOutput = summaryOutput.replace(/Income (\d+) Amount/g, '<strong>Gross Annual Amount:</strong>');

                summaryOutput = summaryOutput.replace(/Asset (\d+) Type/g, '<h4 class="font-semibold mt-4">Asset $1</h4><p><strong>Type of Asset:</strong>');
                summaryOutput = summaryOutput.replace(/Asset (\d+) Value/g, '<strong>Asset Value:</strong>');
                summaryOutput = summaryOutput.replace(/Asset (\d+) Interest Rate/g, '<strong>Interest Rate:</strong>');

                summaryOutput = summaryOutput.replace(/Liability (\d+) Type/g, '<h4 class="font-semibold mt-4">Liability $1</h4><p><strong>Type of Credit/Loan:</strong>');
                summaryOutput = summaryOutput.replace(/Liability (\d+) Creditor's Name/g, '<strong>Creditor's Name:</strong>');
                summaryOutput = summaryOutput.replace(/Liability (\d+) Balance Owed/g, '<strong>Balance Owed:</strong>');
                summaryOutput = summaryOutput.replace(/Liability (\d+) Monthly Payment/g, '<strong>Monthly Payment:</strong>');

                return summaryOutput;
            };

            form.addEventListener('submit', (e) => {
                e.preventDefault();
                const currentSection = document.getElementById(`section-${currentStep}`);
                const requiredInputs = currentSection.querySelectorAll('[required]');
                let isValid = true;
                requiredInputs.forEach(input => {
                    if (!input.checkValidity()) {
                        isValid = false;
                        input.reportValidity();
                    }
                });

                if (isValid) {
                     const summary = generateSummary();
                     const newWindow = window.open('', '_blank', 'width=800,height=600');
                     newWindow.document.write(`
                         <html>
                         <head>
                             <title>Application Summary</title>
                             <style>
                                 body { font-family: sans-serif; padding: 20px; }
                                 h2, h4 { margin-top: 20px; }
                                 p { line-height: 1.5; }
                             </style>
                         </head>
                         <body>
                             <h2>Haron Enterprises, LLC - Application Summary</h2>
                             ${summary}
                             <p class="mt-4"><strong>Page 6 Data Edits:</strong></p>
                             <p><strong>Agreement Checkbox:</strong> ${document.getElementById('agree-terms').checked ? 'Checked' : 'Not Checked'}</p>
                             <p class="mt-8">This data can now be manually reviewed and copied for email.</p>
                         </body>
                         </html>
                     `);
                     newWindow.document.close();
                }
            });
            // END: ADDED CODE FOR FORM SUBMISSION AND SUMMARY
